INFO:blueprints.document:Received file upload request: The Raven.pdf
INFO:blueprints.document:Saving file to: uploads/The_Raven.pdf
INFO:blueprints.document:Initiating streaming response
INFO:blueprints.document:Starting document processing stream
INFO:services.document_processor:Starting document processing: uploads/The_Raven.pdf (size: 544551 bytes, type: .pdf)
INFO:werkzeug:172.31.196.37 - - [06/Nov/2024 12:31:29] "POST /document/upload HTTP/1.1" 200 -
INFO:services.document_processor:Uploading file to Gemini API: uploads/The_Raven.pdf
INFO:services.document_processor:File uploaded successfully: files/jnazd4zxa3f1
INFO:services.document_processor:Starting content extraction
INFO:services.document_processor:Sending content extraction request to Gemini API
INFO:services.document_processor:Received response from Gemini API
ERROR:services.document_processor:Error processing document: Invalid operation: The `response.text` quick accessor requires the response to contain a valid `Part`, but none were returned. The candidate's [finish_reason](https://ai.google.dev/api/generate-content#finishreason) is 4. Meaning that the model was reciting from copyrighted material.
Traceback (most recent call last):
  File "/home/runner/workspace/services/document_processor.py", line 78, in process_document
    if not response or not response.text:
                           ^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/google/generativeai/types/generation_types.py", line 489, in text
    raise ValueError(
ValueError: Invalid operation: The `response.text` quick accessor requires the response to contain a valid `Part`, but none were returned. The candidate's [finish_reason](https://ai.google.dev/api/generate-content#finishreason) is 4. Meaning that the model was reciting from copyrighted material.
ERROR:blueprints.document:Error in processing stream: Invalid operation: The `response.text` quick accessor requires the response to contain a valid `Part`, but none were returned. The candidate's [finish_reason](https://ai.google.dev/api/generate-content#finishreason) is 4. Meaning that the model was reciting from copyrighted material.
Traceback (most recent call last):
  File "/home/runner/workspace/blueprints/document.py", line 47, in generate
    for progress in doc_processor.process_document(str(file_path)):
  File "/home/runner/workspace/services/document_processor.py", line 78, in process_document
    if not response or not response.text:
                           ^^^^^^^^^^^^^
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/google/generativeai/types/generation_types.py", line 489, in text
    raise ValueError(
ValueError: Invalid operation: The `response.text` quick accessor requires the response to contain a valid `Part`, but none were returned. The candidate's [finish_reason](https://ai.google.dev/api/generate-content#finishreason) is 4. Meaning that the model was reciting from copyrighted material.
INFO:blueprints.document:Cleaning up uploaded file: uploads/The_Raven.pdf